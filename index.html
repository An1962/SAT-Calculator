<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SAT Score Calculator - Thủ Khoa Đức An</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        
        .slider-track { transition: width 0.1s ease-out; }
        .slider-thumb { transition: left 0.1s ease-out; }

        @keyframes pulse-glow {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 6px -1px rgba(255, 215, 0, 0.5); }
            50% { transform: scale(1.02); box-shadow: 0 10px 15px -3px rgba(255, 215, 0, 0.7); }
        }
        .animate-cta { animation: pulse-glow 2s infinite; }

        /* Animation rung lắc cho nút Chat */
        @keyframes shake-periodic {
            0% { transform: rotate(0deg) scale(1); }
            2% { transform: rotate(10deg) scale(1.1); }
            4% { transform: rotate(-10deg) scale(1.1); }
            6% { transform: rotate(10deg) scale(1.1); }
            8% { transform: rotate(-10deg) scale(1.1); }
            10% { transform: rotate(0deg) scale(1); }
            100% { transform: rotate(0deg) scale(1); }
        }
        .animate-shake-periodic {
            animation: shake-periodic 5s infinite ease-in-out;
        }

        .transparent-input {
            background: transparent;
            border: none;
            border-bottom: 2px dashed rgba(255,255,255,0.5);
            color: #FFD700; 
            text-align: center;
            transition: all 0.2s;
            padding: 0 0 2px 0;
            border-radius: 0;
            line-height: normal;
            height: auto;
            width: auto;
            display: inline-block;
            min-width: 60px;
        }
        .transparent-input:focus {
            outline: none;
            border-bottom: 2px solid #FFD700;
            background: rgba(255,255,255,0.1);
        }
        .transparent-input::placeholder { 
            color: rgba(255,255,255,0.5); 
            font-style: italic; 
            font-weight: normal; 
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const translations = {
            vi: {
                brandSub: "Chinh phục 1500+ SAT",
                toolName: "Công cụ tính điểm",
                uploadText: "Đổi ảnh",
                modeAuto: "Chế độ tự động tính",
                modeManual: "Chế độ nhập tay",
                btnAuto: "Bật lại tự động",
                questions: "Questions",
                reset: "Đặt lại toàn bộ",
                totalScore: "Total Estimated Score",
                range: "Range: 400 - 1600",
                sectionTitle: "Điểm thành phần",
                rwLabel: "Reading & Writing",
                mathLabel: "Mathematics",
                note: "* Điểm đang được tính tự động. Bạn có thể nhập trực tiếp vào số điểm để sửa thủ công.",
                cta: "HỌC SAT MIỄN PHÍ CÙNG THẦY ĐỨC AN & CHUYÊN GIA 1600/1600",
                targetTitle: "Mục Tiêu Chiến Binh",
                iam: "Tôi là:",
                goal: "Quyết tâm đạt:",
                placeholderName: "Nhập tên bạn...",
                placeholderGoal: "1500+...",
                btnExport: "Chia sẻ mục tiêu của mình",
                footerDesign: "Designed for High Achievers.",
                disclaimerTitle: "MIỄN TRỪ TRÁCH NHIỆM VỀ TÍNH CHÍNH XÁC CỦA ĐIỂM SỐ",
                disclaimerP1: "Công cụ tính điểm này là nguồn tài liệu không chính thức, được thiết kế nhằm mục đích hỗ trợ ôn tập. Mặc dù chúng tôi nỗ lực mô phỏng thuật toán chấm điểm của bài thi Digital SAT sát nhất có thể, xin lưu ý rằng điểm số thực tế của bạn có thể khác biệt so với kết quả hiển thị tại đây.",
                disclaimerP2: "Hệ thống chấm điểm chính thức của College Board rất phức tạp và có tính thích ứng (adaptive). Các yếu tố chính ảnh hưởng đến điểm số cuối cùng bao gồm:",
                disclaimerLi1: "Trọng số câu hỏi: Không phải mọi câu hỏi đều có giá trị điểm như nhau. Các câu hỏi có độ khó khác nhau sẽ được tính trọng số khác nhau trong kết quả cuối cùng.",
                disclaimerLi2: "Câu hỏi không tính điểm (Unscored items): Đề thi SAT chính thức thường bao gồm các câu hỏi thử nghiệm (pretest) nhằm mục đích nghiên cứu. Những câu này không được tính vào điểm số của bạn, nhưng người thi sẽ không thể phân biệt chúng với các câu hỏi tính điểm trong quá trình làm bài.",
                disclaimerP3: "Công cụ này không trực thuộc, không được chứng thực bởi, và không có liên kết với College Board. Hãy sử dụng kết quả này như một thước đo tham khảo cho sự tiến bộ của bạn, không phải là cam kết về điểm số trong kỳ thi thật.",
                dragOrType: "Kéo hoặc nhập số",
                upsellLowTitle: "Cần củng cố nền tảng?",
                upsellLowDesc: "Bạn đang mất gốc? Tham gia ngay khóa Foundation để đạt 1200+ trong 2 tháng.",
                upsellMidTitle: "Bứt phá điểm số!",
                upsellMidDesc: "Đừng để kẹt ở mức điểm này! Khóa Advanced sẽ giúp bạn bứt phá lên 1500+.",
                upsellHighTitle: "Chinh phục đỉnh cao!",
                upsellHighDesc: "Săn học bổng? Tham gia lớp Luyện đề Chuyên sâu cùng Thủ khoa.",
                contactLabel: "Hotline/Zalo:",
                chatTooltip: "Thầy Đức An đang online, cần tư vấn điểm số?"
            },
            en: {
                brandSub: "Conquer 1500+ SAT",
                toolName: "Score Calculator",
                uploadText: "Change Photo",
                modeAuto: "Auto-Calculation Mode",
                modeManual: "Manual Input Mode",
                btnAuto: "Enable Auto Mode",
                questions: "Questions",
                reset: "Reset All",
                totalScore: "Total Estimated Score",
                range: "Range: 400 - 1600",
                sectionTitle: "Section Scores",
                rwLabel: "Reading & Writing",
                mathLabel: "Mathematics",
                note: "* Scores are calculated automatically. You can type directly into the score boxes to override.",
                cta: "LEARN SAT FOR FREE WITH MR. DUC AN & 1600/1600 EXPERTS",
                targetTitle: "Warrior's Goal",
                iam: "I am:",
                goal: "Aiming for:",
                placeholderName: "Your Name...",
                placeholderGoal: "1500+...",
                btnExport: "Share My Goal",
                footerDesign: "Designed for High Achievers.",
                disclaimerTitle: "DISCLAIMER REGARDING SCORE ACCURACY",
                disclaimerP1: "This score calculator is an unofficial resource designed for revision purposes. While we strive to simulate the Digital SAT scoring algorithm as closely as possible, please note that your actual score may differ from the results shown here.",
                disclaimerP2: "The College Board's official scoring system is complex and adaptive. Key factors affecting the final score include:",
                disclaimerLi1: "Question Weighting: Not all questions have the same point value. Questions of varying difficulty will be weighted differently in the final result.",
                disclaimerLi2: "Unscored Items: The official SAT exam often includes pretest questions for research purposes. These questions do not count towards your score, but test-takers cannot distinguish them from scored questions during the exam.",
                disclaimerP3: "This tool is not affiliated with, endorsed by, or connected to the College Board. Please use these results as a reference for your progress, not as a guarantee of your score on the actual exam.",
                dragOrType: "Drag or type",
                upsellLowTitle: "Need Stronger Foundation?",
                upsellLowDesc: "Struggling with basics? Join our Foundation course to hit 1200+ in 2 months.",
                upsellMidTitle: "Break Through!",
                upsellMidDesc: "Stuck at this level? Our Advanced course will help you break through to 1500+.",
                upsellHighTitle: "Aim for Scholarships!",
                upsellHighDesc: "Aiming for scholarships? Join the Intensive Practice class with Top Scorers.",
                contactLabel: "Hotline/Zalo:",
                chatTooltip: "Mr. Duc An is online, need score advice?"
            }
        };

        // --- ICONS ---
        const IconWrapper = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const CalculatorIcon = (p) => <IconWrapper {...p}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconWrapper>;
        const PenTool = (p) => <IconWrapper {...p}><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></IconWrapper>;
        const Award = (p) => <IconWrapper {...p}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></IconWrapper>;
        const BookOpen = (p) => <IconWrapper {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconWrapper>;
        const Hash = (p) => <IconWrapper {...p}><line x1="4" x2="20" y1="9" y2="9"/><line x1="4" x2="20" y1="15" y2="15"/><line x1="10" x2="8" y1="3" y2="21"/><line x1="16" x2="14" y1="3" y2="21"/></IconWrapper>;
        const RefreshCcw = (p) => <IconWrapper {...p}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></IconWrapper>;
        const CheckCircle2 = (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></IconWrapper>;
        const Upload = (p) => <IconWrapper {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></IconWrapper>;
        const ExternalLink = (p) => <IconWrapper {...p}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></IconWrapper>;
        const Download = (p) => <IconWrapper {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></IconWrapper>;
        const Share2 = (p) => <IconWrapper {...p}><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></IconWrapper>;
        const Globe = (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconWrapper>;
        const Phone = (p) => <IconWrapper {...p}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></IconWrapper>;
        const ArrowRight = (p) => <IconWrapper {...p}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconWrapper>;
        const X = (p) => <IconWrapper {...p}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconWrapper>;

        // Social Icons
        const FacebookIcon = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>);
        const YoutubeIcon = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 6.64a29 29 0 0 0 0 3.46 29 29 0 0 0 .46 3.21 2.78 2.78 0 0 0 1.94 2c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-3.21 29 29 0 0 0 0-3.46zM9.75 15.02l5.75-3.27-5.75-3.27z"/></svg>);
        const TiktokIcon = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5v4a9 9 0 0 1-9-9"/></svg>);
        const MessengerIcon = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}>
                <path d="M12 2C6.48 2 2 6.03 2 11c0 2.87 1.56 5.47 3.96 7.12-.05.62-.37 2.17-.41 2.33-.05.22.1.43.3.43.05 0 .1-.01.15-.03 1.33-.58 3.16-1.39 3.76-1.66.74.2 1.52.31 2.32.31 5.52 0 10-4.03 10-9s-4.48-9-10-9zm1.15 11.58l-2.58-2.75-5.04 2.75 5.53-5.87 2.63 2.75 4.99-2.75-5.53 5.87z"/>
            </svg>
        );

        const BRAND_BLUE = "bg-[#004488]";
        const BRAND_YELLOW = "text-[#FFD700]";

        const App = () => {
            const [rw1, setRw1] = useState(0);
            const [rw2, setRw2] = useState(0);
            const [math1, setMath1] = useState(0);
            const [math2, setMath2] = useState(0);
            const [rwScore, setRwScore] = useState(400);
            const [mathScore, setMathScore] = useState(400);
            const [totalScore, setTotalScore] = useState(800);
            const [isAutoCalc, setIsAutoCalc] = useState(true);
            const [logoUrl, setLogoUrl] = useState("https://scontent.fhan19-1.fna.fbcdn.net/v/t39.30808-6/451857108_122097042800425386_7602682011904409290_n.png?_nc_cat=105&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeF5KI_9YQ5D-akv4pn95ai5qZLgHr4cJYSpkuAevhwlhJcbLURmaydM6uCuaMFsO0r71uvEkcB5K3qzZJUGyQ-W&_nc_ohc=jh5DGil1sVoQ7kNvwHeq4Gy&_nc_oc=AdliAeHQtcyTo_WnU8DsNytQi6TgoV5qecCfqWz3qnP5ptMUPmnKSEyvJlDwPRJNbTI&_nc_zt=23&_nc_ht=scontent.fhan19-1.fna&_nc_gid=mWvYiwDI82jFu9mMJf0d_A&oh=00_Afg3GkZGL-wffds_Vs7bra1y1EchAvJzZwt3UCai0wrnpw&oe=692EDD83");
            const [studentName, setStudentName] = useState("");
            const [studentGoal, setStudentGoal] = useState("");
            const [lang, setLang] = useState('vi');
            const [showChatTooltip, setShowChatTooltip] = useState(true);
            const t = translations[lang];

            const fileInputRef = useRef(null);
            const captureRef = useRef(null);
            const isFirstRender = useRef(true);

            useEffect(() => {
                const savedData = localStorage.getItem('satCalcData');
                if (savedData) {
                    try {
                        const data = JSON.parse(savedData);
                        setRw1(data.rw1 || 0);
                        setRw2(data.rw2 || 0);
                        setMath1(data.math1 || 0);
                        setMath2(data.math2 || 0);
                        setStudentName(data.studentName || "");
                        setStudentGoal(data.studentGoal || "");
                        setIsAutoCalc(data.isAutoCalc !== undefined ? data.isAutoCalc : true);
                        if (data.isAutoCalc !== false) { } else if (data.rwScore && data.mathScore) {
                            setRwScore(data.rwScore);
                            setMathScore(data.mathScore);
                        }
                    } catch (e) { console.error(e); }
                }
                isFirstRender.current = false;
            }, []);

            useEffect(() => {
                if (!isFirstRender.current) {
                    const dataToSave = { rw1, rw2, math1, math2, studentName, studentGoal, isAutoCalc, rwScore, mathScore };
                    localStorage.setItem('satCalcData', JSON.stringify(dataToSave));
                }
            }, [rw1, rw2, math1, math2, studentName, studentGoal, isAutoCalc, rwScore, mathScore]);

            const toggleLang = () => { setLang(prev => prev === 'vi' ? 'en' : 'vi'); };

            const calculateEstScore = (correct, totalQuestions) => {
                if (totalQuestions === 0) return 200;
                const score = 200 + (correct / totalQuestions) * 600;
                return Math.round(score / 10) * 10;
            };

            useEffect(() => {
                if (isAutoCalc) {
                    const rwTotalCorrect = rw1 + rw2;
                    const mathTotalCorrect = math1 + math2;
                    setRwScore(calculateEstScore(rwTotalCorrect, 54));
                    setMathScore(calculateEstScore(mathTotalCorrect, 44));
                }
            }, [rw1, rw2, math1, math2, isAutoCalc]);

            useEffect(() => {
                const rw = parseInt(rwScore) || 0;
                const math = parseInt(mathScore) || 0;
                setTotalScore(rw + math);
            }, [rwScore, mathScore]);

            useEffect(() => {
                if (isFirstRender.current) return;
                if (totalScore === 1600) {
                    const duration = 3000; const end = Date.now() + duration;
                    (function frame() {
                        confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#FFD700', '#004488', '#ffffff'] });
                        confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#FFD700', '#004488', '#ffffff'] });
                        if (Date.now() < end) { requestAnimationFrame(frame); }
                    }());
                } else if (totalScore > 1500) {
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#FFD700', '#004488'] });
                }
            }, [totalScore]);

            const handleReset = () => {
                setRw1(0); setRw2(0); setMath1(0); setMath2(0);
                setRwScore(400); setMathScore(400); setIsAutoCalc(true);
                setStudentName(""); setStudentGoal("");
                localStorage.removeItem('satCalcData');
            };

            const handleManualScoreChange = (type, val) => {
                setIsAutoCalc(false);
                if (type === 'rw') setRwScore(val);
                if (type === 'math') setMathScore(val);
            };

            const handleLogoUpload = (event) => {
                const file = event.target.files[0];
                if (file) { setLogoUrl(URL.createObjectURL(file)); }
            };

            const handleExportImage = async () => {
                if (!captureRef.current) return;
                try {
                    const canvas = await html2canvas(captureRef.current, { scale: 3, useCORS: true, backgroundColor: '#004488', logging: false });
                    const image = canvas.toDataURL("image/png");
                    const link = document.createElement("a");
                    link.href = image;
                    link.download = `SAT-Goal-${studentName || 'ChienBinh'}.png`;
                    link.click();
                } catch (err) { alert("Không thể tạo ảnh. Vui lòng thử lại."); }
            };

            const getUpsellContent = () => {
                if (totalScore < 1200) {
                    return { title: t.upsellLowTitle, desc: t.upsellLowDesc, bg: "bg-orange-50 border-orange-100", text: "text-orange-800", iconColor: "text-orange-500" };
                } else if (totalScore <= 1450) {
                    return { title: t.upsellMidTitle, desc: t.upsellMidDesc, bg: "bg-blue-50 border-blue-100", text: "text-blue-800", iconColor: "text-blue-600" };
                } else {
                    return { title: t.upsellHighTitle, desc: t.upsellHighDesc, bg: "bg-purple-50 border-purple-100", text: "text-purple-800", iconColor: "text-purple-600" };
                }
            };
            const upsell = getUpsellContent();

            return (
                <div className="min-h-screen pb-10 flex flex-col bg-slate-50 relative">
                    <header className={`${BRAND_BLUE} text-white shadow-lg border-b-4 border-[#FFD700] sticky top-0 z-50`}>
                        <div className="max-w-5xl mx-auto px-4 py-2 flex flex-col md:flex-row items-center justify-between gap-2 md:gap-4">
                            <div className="flex items-center gap-4 w-full md:w-auto justify-center md:justify-start">
                                <div className="relative w-12 h-12 md:w-14 md:h-14 rounded-full border-4 border-white/30 overflow-hidden bg-white shadow-md shrink-0 cursor-pointer group hover:border-white transition-colors" onClick={() => fileInputRef.current.click()}>
                                    {logoUrl ? (<img src={logoUrl} alt="Logo" className="w-full h-full object-cover" crossOrigin="anonymous"/>) : (<div className="w-full h-full flex flex-col items-center justify-center text-blue-900 bg-slate-100"><Upload size={16} className="opacity-50 mb-0.5"/><span className="text-[7px] font-bold opacity-50">{t.uploadText}</span></div>)}
                                    <div className="absolute inset-0 bg-black/40 hidden group-hover:flex items-center justify-center text-white text-[8px] font-bold uppercase">{t.uploadText}</div>
                                </div>
                                <input type="file" ref={fileInputRef} className="hidden" accept="image/*" onChange={handleLogoUpload} />
                                <div className="text-center md:text-left">
                                    <h1 className="text-base md:text-xl font-black tracking-tight uppercase leading-tight">SAT Thủ Khoa <span className={`block md:inline ${BRAND_YELLOW}`}>Đức An</span></h1>
                                    <p className="text-blue-200 text-[9px] md:text-xs font-bold uppercase tracking-[0.15em] flex items-center justify-center md:justify-start gap-1 mt-0.5"><Award size={12} className="text-[#FFD700]" /> {t.brandSub}</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-3 justify-end w-full md:w-auto">
                                <button onClick={toggleLang} className="flex items-center gap-1.5 bg-white/10 hover:bg-white/20 px-2.5 py-1 rounded-full text-xs font-bold transition-colors border border-white/20"><Globe size={12} /> {lang === 'vi' ? 'VI' : 'EN'}</button>
                                <div className="hidden md:block text-right opacity-90"><h2 className="text-xs font-semibold">{t.toolName}</h2><div className="flex items-center justify-end gap-1 text-[9px] text-blue-300 uppercase tracking-wider"><CalculatorIcon size={10} /> Digital SAT Calculator</div></div>
                            </div>
                        </div>
                    </header>

                    <main className="flex-1 max-w-5xl mx-auto w-full px-3 md:px-4 py-2 md:py-4">
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-3 md:gap-6">
                            {/* LEFT: INPUTS */}
                            <div className="lg:col-span-7 space-y-3">
                                <a href="https://satfelis.izteach.vn/" target="_blank" rel="noopener noreferrer" className="animate-cta w-full flex items-center justify-center gap-2 bg-yellow-400 hover:bg-yellow-300 text-blue-900 font-black text-sm md:text-base py-3 px-4 rounded-xl shadow-lg transition-all transform hover:-translate-y-1 border-b-4 border-yellow-600 active:border-b-0 active:translate-y-1 text-center leading-tight">
                                    <Award size={20} className="shrink-0" />
                                    <span>{t.cta}</span>
                                </a>

                                <div className="bg-white p-3 md:p-4 rounded-2xl shadow-sm border border-slate-200">
                                    <div className="flex items-center justify-between mb-3 border-b border-slate-50 pb-2"><h3 className="text-base font-bold flex items-center gap-2 text-slate-700"><BookOpen className="text-blue-600" size={18}/> Reading & Writing</h3><span className="text-[10px] font-bold bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full">54 {t.questions}</span></div>
                                    <div className="space-y-3"><ModuleSlider label="Module 1" max={27} value={rw1} onChange={(v) => { setRw1(v); setIsAutoCalc(true); }} color="blue" dragText={t.dragOrType}/><ModuleSlider label="Module 2" max={27} value={rw2} onChange={(v) => { setRw2(v); setIsAutoCalc(true); }} color="blue" dragText={t.dragOrType}/></div>
                                </div>
                                <div className="bg-white p-3 md:p-4 rounded-2xl shadow-sm border border-slate-200">
                                    <div className="flex items-center justify-between mb-3 border-b border-slate-50 pb-2"><h3 className="text-base font-bold flex items-center gap-2 text-slate-700"><Hash className="text-orange-600" size={18}/> Math</h3><span className="text-[10px] font-bold bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full">44 {t.questions}</span></div>
                                    <div className="space-y-3"><ModuleSlider label="Module 1" max={22} value={math1} onChange={(v) => { setMath1(v); setIsAutoCalc(true); }} color="orange" dragText={t.dragOrType}/><ModuleSlider label="Module 2" max={22} value={math2} onChange={(v) => { setMath2(v); setIsAutoCalc(true); }} color="orange" dragText={t.dragOrType}/></div>
                                </div>
                                <button onClick={handleReset} className="w-full md:w-auto flex justify-center md:justify-start items-center gap-2 text-xs text-slate-500 hover:text-blue-600 transition-colors py-2"><RefreshCcw size={14} /> {t.reset}</button>
                                
                                <div className="flex items-center justify-between bg-blue-50 p-2 rounded-lg border border-blue-100 text-xs text-blue-800 shadow-sm">
                                    <span className="flex items-center gap-2 font-medium"><CheckCircle2 size={14} className="text-blue-600"/> {isAutoCalc ? t.modeAuto : t.modeManual}</span>
                                    {!isAutoCalc && (<button onClick={() => setIsAutoCalc(true)} className="text-xs font-bold text-blue-600 hover:text-blue-800 underline decoration-2 underline-offset-2">{t.btnAuto}</button>)}
                                </div>
                            </div>

                            {/* RIGHT: RESULTS & CTA */}
                            <div className="lg:col-span-5 space-y-3 flex flex-col">
                                <div className="order-1 relative">
                                    <div ref={captureRef} className="bg-gradient-to-br from-[#004488] to-[#003366] rounded-2xl p-4 md:p-6 text-white shadow-xl relative overflow-hidden border border-blue-800 flex flex-col justify-between" style={{ minHeight: '340px' }}>
                                        <div className="absolute -top-10 -right-10 w-40 h-40 bg-[#FFD700] rounded-full opacity-20 blur-3xl"></div>
                                        <div className="absolute bottom-0 left-0 w-32 h-32 bg-blue-400 rounded-full mix-blend-overlay opacity-10 blur-2xl"></div>
                                        <div className="relative z-10 flex flex-col gap-3">
                                            <div className="flex items-center gap-2 justify-center opacity-80"><div className="h-px bg-yellow-500/50 w-8"></div><span className="text-[#FFD700] text-[10px] font-bold uppercase tracking-widest">{t.targetTitle}</span><div className="h-px bg-yellow-500/50 w-8"></div></div>
                                            <div className="flex flex-col gap-3">
                                                <div className="flex items-center justify-center gap-2"><span className="text-xs text-blue-200 whitespace-nowrap">{t.iam}</span><input type="text" value={studentName} onChange={(e) => setStudentName(e.target.value)} placeholder={t.placeholderName} className="transparent-input w-36 text-sm font-bold" maxLength={20} /></div>
                                                <div className="flex items-center justify-center gap-2"><span className="text-xs text-blue-200 whitespace-nowrap">{t.goal}</span><input type="text" value={studentGoal} onChange={(e) => setStudentGoal(e.target.value)} placeholder={t.placeholderGoal} className="transparent-input w-24 text-lg font-black" maxLength={10} /><span className="text-xs text-blue-200 font-bold">SAT</span></div>
                                            </div>
                                        </div>
                                        <div className="relative z-10 text-center pt-4 border-t border-white/10 mt-4">
                                            <h3 className="text-blue-200 text-[10px] md:text-xs font-bold tracking-[0.2em] uppercase mb-2">{t.totalScore}</h3>
                                            <div className="text-6xl md:text-7xl font-black tracking-tighter text-white leading-none mb-5 drop-shadow-lg">{totalScore}</div>
                                            <div className="flex justify-center">
                                                <div className="inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-1.5 rounded-full text-[10px] md:text-xs text-blue-100 border border-white/10 relative z-20">
                                                    {logoUrl ? (<img src={logoUrl} alt="Logo" className="w-4 h-4 rounded-full object-cover border border-white" crossOrigin="anonymous"/>) : (<div className="w-4 h-4 rounded-full bg-slate-200 border border-white flex items-center justify-center text-[8px] text-blue-900 font-bold opacity-70">L</div>)}
                                                    <span className="font-bold tracking-wide uppercase">SAT Thủ Khoa Đức An</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <button onClick={handleExportImage} className="absolute top-3 right-3 bg-white/10 hover:bg-white/20 p-1.5 rounded-full text-white backdrop-blur-md transition-all opacity-0 group-hover:opacity-100 z-20 hidden md:block" title={t.btnExport}><Share2 size={16} /></button>
                                </div>

                                <div className="bg-white p-3 md:p-4 rounded-2xl shadow-lg border border-blue-50 order-2">
                                    <h4 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2 pb-2 border-b border-slate-100"><PenTool size={12} /> {t.sectionTitle}</h4>
                                    <div className="space-y-3">
                                        <ScoreInput label={t.rwLabel} value={rwScore} max={800} onChange={(val) => handleManualScoreChange('rw', val)} color="text-blue-700" borderColor="focus:border-blue-500"/>
                                        <ScoreInput label={t.mathLabel} value={mathScore} max={800} onChange={(val) => handleManualScoreChange('math', val)} color="text-orange-600" borderColor="focus:border-orange-500"/>
                                    </div>
                                    <div className="mt-3 p-2 bg-slate-50 rounded-lg border border-slate-100 text-[10px] md:text-xs text-slate-500 italic text-center leading-relaxed">{t.note}</div>
                                </div>

                                <a href="sms:+84812358277" className={`order-3 block ${upsell.bg} border p-3 rounded-xl shadow-sm hover:shadow-md transition-all transform hover:-translate-y-0.5`}>
                                    <div className="flex items-start gap-3">
                                        <div className={`mt-1 ${upsell.iconColor}`}><Award size={20} /></div>
                                        <div>
                                            <h4 className={`font-bold text-xs mb-0.5 ${upsell.text}`}>{upsell.title}</h4>
                                            <p className={`text-[10px] leading-relaxed ${upsell.text} opacity-90`}>{upsell.desc}</p>
                                            <div className={`mt-1.5 text-[10px] font-bold flex items-center gap-1 ${upsell.text}`}>Nhắn tin tư vấn ngay <ArrowRight size={10} /></div>
                                        </div>
                                    </div>
                                </a>

                                <div className="text-center order-4">
                                     <button onClick={handleExportImage} className="inline-flex items-center justify-center gap-2 text-xs text-blue-600 font-bold px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors shadow-sm border border-blue-100"><Download size={14} /> {t.btnExport}</button>
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* Floating Chat Button */}
                    <div className="fixed bottom-6 right-6 z-50 flex flex-col items-end">
                        {showChatTooltip && (
                            <div className="relative mb-2 mr-2 bg-white text-slate-800 text-xs font-semibold py-2 px-3 rounded-lg shadow-lg border border-slate-100 animate-bounce-subtle max-w-[160px]">
                                {t.chatTooltip}
                                <button 
                                    onClick={(e) => { e.stopPropagation(); setShowChatTooltip(false); }}
                                    className="absolute -top-2 -right-2 bg-slate-200 hover:bg-slate-300 text-slate-600 rounded-full p-0.5 transition-colors"
                                >
                                    <X size={10} />
                                </button>
                                <div className="absolute bottom-0 right-4 transform translate-y-1/2 rotate-45 w-2 h-2 bg-white border-r border-b border-slate-100"></div>
                            </div>
                        )}
                        <a 
                            href="https://www.facebook.com/nghiemducan.10/" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="bg-[#0084FF] hover:bg-[#0078E7] text-white p-3 rounded-full shadow-2xl transition-all hover:scale-110 flex items-center justify-center animate-shake-periodic"
                        >
                            <MessengerIcon size={28} />
                        </a>
                    </div>
                    
                    <footer className="bg-white border-t border-slate-200 py-4 mt-auto">
                        <div className="max-w-5xl mx-auto px-4 flex flex-col items-center gap-4">
                            <div className="flex items-center gap-6">
                                <a href="https://www.facebook.com/nghiemducan.10/" target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-[#1877F2] transition-colors transform hover:scale-110 duration-200" title="Facebook"><FacebookIcon size={24} /></a>
                                <a href="https://www.youtube.com/channel/UCCqRccvHo-t-7Hap2LBn4fg" target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-[#FF0000] transition-colors transform hover:scale-110 duration-200" title="YouTube"><YoutubeIcon size={28} /></a>
                                <a href="https://www.tiktok.com/@an.sat" target="_blank" rel="noopener noreferrer" className="text-slate-400 hover:text-black transition-colors transform hover:scale-110 duration-200" title="TikTok"><TiktokIcon size={22} /></a>
                            </div>
                            <div className="flex items-center gap-2 text-slate-500 text-xs font-semibold bg-slate-50 px-3 py-1.5 rounded-full border border-slate-200">
                                <Phone size={12} />
                                <span>{t.contactLabel} <a href="tel:0812358277" className="text-blue-600 hover:underline">081 235 8277</a></span>
                            </div>
                            <section className="w-full bg-slate-100 rounded-xl shadow-inner border border-slate-200 text-slate-700 text-xs p-4 mt-2">
                                <h2 className="text-sm font-bold text-slate-800 mb-2 text-center uppercase">{t.disclaimerTitle}</h2>
                                <p className="mb-2 leading-relaxed">{t.disclaimerP1}</p>
                                <p className="mb-2 leading-relaxed">{t.disclaimerP2}</p>
                                <ul className="list-disc list-inside mb-2 pl-2 space-y-1 text-slate-600"><li>{t.disclaimerLi1}</li><li>{t.disclaimerLi2}</li></ul>
                                <p className="leading-relaxed">{t.disclaimerP3}</p>
                            </section>
                            <div className="text-center pt-2">
                                <p className="text-slate-500 font-bold text-xs">SAT Thủ Khoa Đức An</p>
                                <p className="text-slate-400 text-[10px] mt-0.5">{t.footerDesign}</p>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        // ... Components
        const ModuleSlider = ({ label, max, value, onChange, color, dragText }) => {
            const percentage = Math.round((value / max) * 100);
            const isBlue = color === 'blue';
            const activeColor = isBlue ? 'bg-blue-600' : 'bg-orange-500';
            const trackColor = isBlue ? 'bg-blue-100' : 'bg-orange-100';
            const textColor = isBlue ? 'text-blue-700' : 'text-orange-700';
            const thumbBorder = isBlue ? 'border-blue-600' : 'border-orange-500';
            const handleInputChange = (e) => { let val = parseInt(e.target.value); if (isNaN(val)) val = 0; if (val > max) val = max; if (val < 0) val = 0; onChange(val); };
            return (
                <div className="relative select-none">
                    <div className="flex justify-between items-end mb-1.5">
                        <label className="text-xs font-medium text-slate-600">{label}</label>
                        <div className="flex items-baseline gap-1 group relative">
                            <input type="number" min="0" max={max} value={value.toString()} onChange={handleInputChange} className={`text-lg md:text-xl font-bold ${textColor} text-right bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 outline-none w-12 p-0 transition-colors z-10 relative`}/>
                            <span className="text-[10px] text-slate-400 font-normal">/ {max}</span>
                        </div>
                    </div>
                    <div className="relative h-4 w-full flex items-center cursor-pointer touch-none group"> 
                        <div className="relative h-2 w-full rounded-full bg-slate-100 overflow-hidden">
                            <div className={`absolute top-0 left-0 h-full w-full ${trackColor} opacity-30`}></div>
                            <div className={`slider-track absolute top-0 left-0 h-full ${activeColor} rounded-full`} style={{ width: `${percentage}%` }}></div>
                        </div>
                        <div className={`slider-thumb absolute h-4 w-4 rounded-full bg-white border-2 ${thumbBorder} shadow-md flex items-center justify-center pointer-events-none z-10 transform -translate-x-1/2 transition-transform group-active:scale-110`} style={{ left: `${percentage}%` }}>
                            <div className={`w-1.5 h-1.5 rounded-full ${isBlue ? 'bg-blue-600' : 'bg-orange-500'}`}></div>
                        </div>
                        <input type="range" min="0" max={max} value={value} onChange={(e) => onChange(parseInt(e.target.value))} className="absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer z-20"/>
                    </div>
                    <div className="mt-0.5 text-[9px] text-slate-400 text-right italic opacity-0 group-hover:opacity-100 transition-opacity">{dragText}</div>
                </div>
            );
        };
        const ScoreInput = ({ label, value, onChange, color, borderColor, max }) => {
            const handleChange = (e) => { const val = e.target.value; if (val === '' || (parseInt(val) >= 0 && parseInt(val) <= max)) onChange(val); };
            return (
                <div className="group relative">
                    <label className="block text-[9px] md:text-[10px] font-bold text-slate-500 uppercase mb-1 tracking-wide">{label}</label>
                    <div className="relative">
                        <input type="number" value={value} placeholder="200-800" onChange={handleChange} className={`w-full text-2xl md:text-3xl font-bold p-2 pl-3 rounded-xl border-2 border-slate-100 bg-slate-50 outline-none transition-all ${borderColor} group-hover:border-slate-200 focus:bg-white text-slate-800 shadow-inner`}/>
                        <div className={`absolute right-3 top-1/2 -translate-y-1/2 text-[10px] md:text-xs font-bold opacity-40 ${color}`}>/ {max}</div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


